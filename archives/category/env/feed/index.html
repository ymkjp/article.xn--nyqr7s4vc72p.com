<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>env &#8211; It works!</title>
	<atom:link href="https://xn--nyqr7s4vc72p.com/archives/category/env/feed" rel="self" type="application/rss+xml" />
	<link>https://xn--nyqr7s4vc72p.com</link>
	<description>A techie blog</description>
	<lastBuildDate>Wed, 07 Sep 2016 17:42:50 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=4.6.1</generator>

<image>
	<url>https://xn--nyqr7s4vc72p.com/wp-content/uploads/2016/03/identicon.png</url>
	<title>env &#8211; It works!</title>
	<link>https://xn--nyqr7s4vc72p.com</link>
	<width>32</width>
	<height>32</height>
</image> 
<site xmlns="com-wordpress:feed-additions:1">108279505</site>	<item>
		<title>Alfredでワンライナーをいい感じに実行できるようにした</title>
		<link>https://xn--nyqr7s4vc72p.com/archives/50</link>
		<comments>https://xn--nyqr7s4vc72p.com/archives/50#respond</comments>
		<pubDate>Thu, 10 Jul 2014 19:39:00 +0000</pubDate>
		<dc:creator><![CDATA[@i05]]></dc:creator>
				<category><![CDATA[alfred]]></category>
		<category><![CDATA[dev]]></category>
		<category><![CDATA[env]]></category>
		<category><![CDATA[osx]]></category>
		<category><![CDATA[php]]></category>
		<category><![CDATA[Ruby]]></category>

		<guid isPermaLink="false">http://tk2-249-34500.vs.sakura.ne.jp/2014/07/10/alfred%e3%81%a7%e3%83%af%e3%83%b3%e3%83%a9%e3%82%a4%e3%83%8a%e3%83%bc%e3%82%92%e3%81%84%e3%81%84%e6%84%9f%e3%81%98%e3%81%ab%e5%ae%9f%e8%a1%8c%e3%81%a7%e3%81%8d%e3%82%8b%e3%82%88%e3%81%86%e3%81%ab/</guid>
		<description><![CDATA[Powerpacker 限定のお手軽ワンライナー実行環境です！ PHP版とRuby版があります。 https://github.com/ymkjp/alfredphp.alfredworkflow https://github.com/ymkjp/aruby.alfredworkflow 書いた後でAlfredプロンプトからシェルコマンド実行できるじゃんって気づきましたが、コンソール画面を立ち上げずにワンライナーを入力してクリップボードに出力結果を得られるので全くの特徴がないわけではない！ と自分を励ましつつそっと MacBookAir を閉じました。 http://support.alfredapp.com/features:terminal @ymkjp]]></description>
				<content:encoded><![CDATA[<p><a href="https://xn--nyqr7s4vc72p.com/wp-content/uploads/blogger/-IyQBedwP6k4/U77n8V8NpmI/AAAAAAAASVU/2q6e-S7lZVE/s1600/Screenshot%2B2014-07-11%2B03.08.53.png"><img border="0" src="https://xn--nyqr7s4vc72p.com/wp-content/uploads/blogger/-IyQBedwP6k4/U77n8V8NpmI/AAAAAAAASVU/2q6e-S7lZVE/s400/Screenshot%2B2014-07-11%2B03.08.53.png" /></a><a href="https://xn--nyqr7s4vc72p.com/wp-content/uploads/blogger/-zWlc94N3eCk/U77n_At3zAI/AAAAAAAASVc/Hgutz1PYa_E/s1600/Screenshot%2B2014-07-11%2B03.08.57.png"><img border="0" src="https://xn--nyqr7s4vc72p.com/wp-content/uploads/blogger/-zWlc94N3eCk/U77n_At3zAI/AAAAAAAASVc/Hgutz1PYa_E/s400/Screenshot%2B2014-07-11%2B03.08.57.png" /></a></p>
<p>Powerpacker 限定のお手軽ワンライナー実行環境です！
<div></div>
<div>PHP版とRuby版があります。</p>
<pre><a href="https://github.com/ymkjp/alfredphp.alfredworkflow">https://github.com/ymkjp/alfredphp.alfredworkflow</a></pre>
<pre><a href="https://github.com/ymkjp/aruby.alfredworkflow">https://github.com/ymkjp/aruby.alfredworkflow</a></pre>
<div></div>
<p>書いた後でAlfredプロンプトからシェルコマンド実行できるじゃんって気づきましたが、コンソール画面を立ち上げずにワンライナーを入力してクリップボードに出力結果を得られるので全くの特徴がないわけではない！ と自分を励ましつつそっと MacBookAir を閉じました。</p></div>
<div></div>
<div><a href="http://support.alfredapp.com/features:terminal">http://support.alfredapp.com/features:terminal</a></div>
<div>
<div><adress><a href="http://twitter.com/ymkjp">@ymkjp</a></adress></div>
</div>
]]></content:encoded>
			<wfw:commentRss>https://xn--nyqr7s4vc72p.com/archives/50/feed</wfw:commentRss>
		<slash:comments>0</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">50</post-id>	</item>
		<item>
		<title>OSX移行後にシェルが即死する問題を解決するには /etc/passwd じゃなくてSystem Preferences から</title>
		<link>https://xn--nyqr7s4vc72p.com/archives/70</link>
		<comments>https://xn--nyqr7s4vc72p.com/archives/70#respond</comments>
		<pubDate>Sat, 01 Mar 2014 09:03:00 +0000</pubDate>
		<dc:creator><![CDATA[@i05]]></dc:creator>
				<category><![CDATA[env]]></category>
		<category><![CDATA[osx]]></category>
		<category><![CDATA[shell]]></category>

		<guid isPermaLink="false">http://tk2-249-34500.vs.sakura.ne.jp/2014/03/01/osx%e7%a7%bb%e8%a1%8c%e5%be%8c%e3%81%ab%e3%82%b7%e3%82%a7%e3%83%ab%e3%81%8c%e5%8d%b3%e6%ad%bb%e3%81%99%e3%82%8b%e5%95%8f%e9%a1%8c%e3%82%92%e8%a7%a3%e6%b1%ba%e3%81%99%e3%82%8b%e3%81%ab%e3%81%af-etcpa/</guid>
		<description><![CDATA[OSXの「移行アシスタント」を使って移行したあとに iTerm でシェルを開こうとしたところ iTerm が即死しました。 解決策は、「システム環境設定」→「ユーザーとグループ」で鍵ボタンをクリックして admin になる→アカウントを右クリック→「詳細オプション」でログインシェルを変更→再起動でした。 設定画面のキャプチャ。うーん、いわれてみれば昔設定した覚えがあるような気がする。 恐らく移行元の Mac で homebrew から入れた zsh などを使っていた人にこの問題が起こると思います。 iTerm は即死する場合こういうプロンプトを出してから死んでくれます。 そのときシェルは「zshが見つからないよぅ」とか弱音をはいていました。 ちなみに当初は Linux からの連想で Finder から Sublime で /etc/passwd を編集して解決しようとしたのですがそれらしき箇所を見つけることができず、困ってユーザごとのログインシェルの設定方法を検索すると今回の解決策にたどり着くことができました。 そして最後に、今回の記事内容の環境は移行元移行先ともに OS X 10.9.2 を元に書きました。 何かの参考になれば幸いです。 参考にしたサイト Macとかの雑記帳 @ymkjp]]></description>
				<content:encoded><![CDATA[<p>OSXの「移行アシスタント」を使って移行したあとに iTerm でシェルを開こうとしたところ iTerm が即死しました。</p>
<p>解決策は、「システム環境設定」→「ユーザーとグループ」で鍵ボタンをクリックして admin になる→アカウントを右クリック→「詳細オプション」でログインシェルを変更→再起動でした。</p>
<p><a href="https://xn--nyqr7s4vc72p.com/wp-content/uploads/blogger/-q-2ccDMnUEg/UxGcv7FSndI/AAAAAAAAR4E/I0fLOdM4Cn8/s1600/Screenshot_2014-03-01_17_31_02.png"><img border="0" src="https://xn--nyqr7s4vc72p.com/wp-content/uploads/blogger/-q-2ccDMnUEg/UxGcv7FSndI/AAAAAAAAR4E/I0fLOdM4Cn8/s400/Screenshot_2014-03-01_17_31_02.png" width="580" /></a></p>
<p>設定画面のキャプチャ。うーん、いわれてみれば昔設定した覚えがあるような気がする。</p>
<p>恐らく移行元の Mac で homebrew から入れた zsh などを使っていた人にこの問題が起こると思います。</p>
<p><a href="https://xn--nyqr7s4vc72p.com/wp-content/uploads/blogger/-BRK6QPd9hBs/UxGeYeNy72I/AAAAAAAAR4Q/od3iFEuya0Q/s1600/Screenshot%2B2014-02-28%2B09.03.11.png"><img border="0" src="https://xn--nyqr7s4vc72p.com/wp-content/uploads/blogger/-BRK6QPd9hBs/UxGeYeNy72I/AAAAAAAAR4Q/od3iFEuya0Q/s400/Screenshot%2B2014-02-28%2B09.03.11.png" width="580" /></a></p>
<p>iTerm は即死する場合こういうプロンプトを出してから死んでくれます。</p>
<p><a href="https://xn--nyqr7s4vc72p.com/wp-content/uploads/blogger/-5vNoZ0iCt3Q/UxGeaff9rII/AAAAAAAAR4Y/zM5NMLueqrU/s1600/Screenshot%2B2014-02-28%2B09.03.53.png"><img border="0" src="https://xn--nyqr7s4vc72p.com/wp-content/uploads/blogger/-5vNoZ0iCt3Q/UxGeaff9rII/AAAAAAAAR4Y/zM5NMLueqrU/s400/Screenshot%2B2014-02-28%2B09.03.53.png" width="580" /></a></p>
<p>そのときシェルは「zshが見つからないよぅ」とか弱音をはいていました。</p>
<p>ちなみに当初は Linux からの連想で Finder から Sublime で /etc/passwd を編集して解決しようとしたのですがそれらしき箇所を見つけることができず、困って<span style="font-family: 'Helvetica Neue Light', HelveticaNeue-Light, helvetica, arial, sans-serif;">ユーザごとのログインシェルの設定方法を検索すると今回の解決策にたどり着くことができました</span>。</p>
<p><a href="https://xn--nyqr7s4vc72p.com/wp-content/uploads/blogger/-fE7ZJwdBYbQ/UxGk8Ghw1FI/AAAAAAAAR4o/5ei_pRKuTkw/s1600/Screenshot%2B2014-03-01%2B18.13.30.png"><img border="0" src="https://xn--nyqr7s4vc72p.com/wp-content/uploads/blogger/-fE7ZJwdBYbQ/UxGk8Ghw1FI/AAAAAAAAR4o/5ei_pRKuTkw/s320/Screenshot%2B2014-03-01%2B18.13.30.png" /></a></p>
<p>そして最後に、今回の記事内容の環境は移行元移行先ともに OS X 10.9.2 を元に書きました。</p>
<p>何かの参考になれば幸いです。</p>
<p>
<h4></h4>
<h4>参考にしたサイト</h4>
<div>
<ul>
<li>
<div><small><cite title="MacのログインシェルをHomebrew等で入れたzshやbashに変更する方法"><a href="http://tukaikta.blog135.fc2.com/blog-entry-195.html">Macとかの雑記帳</a></cite></small></div>
</li>
</ul>
</div>
<div><adress><a href="http://twitter.com/ymkjp">@ymkjp</a></adress></div>
]]></content:encoded>
			<wfw:commentRss>https://xn--nyqr7s4vc72p.com/archives/70/feed</wfw:commentRss>
		<slash:comments>0</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">70</post-id>	</item>
		<item>
		<title>MacOSXでOS自作覚え書き 下準備編</title>
		<link>https://xn--nyqr7s4vc72p.com/archives/97</link>
		<comments>https://xn--nyqr7s4vc72p.com/archives/97#respond</comments>
		<pubDate>Sat, 14 Dec 2013 14:05:00 +0000</pubDate>
		<dc:creator><![CDATA[@i05]]></dc:creator>
				<category><![CDATA[dev]]></category>
		<category><![CDATA[env]]></category>
		<category><![CDATA[home-made-OS]]></category>
		<category><![CDATA[osx]]></category>

		<guid isPermaLink="false">http://tk2-249-34500.vs.sakura.ne.jp/2013/12/14/macosx%e3%81%a7os%e8%87%aa%e4%bd%9c%e8%a6%9a%e3%81%88%e6%9b%b8%e3%81%8d-%e4%b8%8b%e6%ba%96%e5%82%99%e7%b7%a8/</guid>
		<description><![CDATA[『30日でできる! OS自作入門』の開発環境を構築する手順を書いていきます。 前提となる環境は下記の通りです。 $ sw_versProductName: Mac OS XProductVersion: 10.9BuildVersion: 13A603 まず遠回りをして こちらの記事 を参考にOSXに付属しているBSD系のアセンブラ nasm を使って VirtualBox で OS をブートして遊んでみます。 $ nasm -vNASM version 0.98.40 (Apple Computer, Inc. build 11) compiled on Aug 13 2013 フロッピー形式でプログラムを用意して hello, world と言わせてみましょう。アセンブリですよ！ つぎに VirtualBox にフロッピーとして読み込ませる img ファイルを生成します。 $ nasm -o helloos.img helloos.asm &#038;& ruby -e 'print "" * (0x168000-0x200)' &#8230; <a href="https://xn--nyqr7s4vc72p.com/archives/97" class="more-link">Continue reading<span class="screen-reader-text"> "MacOSXでOS自作覚え書き 下準備編"</span></a>]]></description>
				<content:encoded><![CDATA[<p>『<cite title="OS自作入門"><a href="http://www.amazon.co.jp/gp/product/4839919844/ref=as_li_ss_tl?ie=UTF8&amp;camp=247&amp;creative=7399&amp;creativeASIN=4839919844&amp;linkCode=as2&amp;tag=m0b55-22">30日でできる! OS自作入門</a></cite>』の開発環境を構築する手順を書いていきます。</p>
<p>前提となる環境は下記の通りです。</p>
<pre>$ sw_vers<br />ProductName: Mac OS X<br />ProductVersion: 10.9<br />BuildVersion: 13A603</pre>
<p>まず遠回りをして <a href="http://ktaobo.blogspot.jp/2013/02/helloos.html?m=1">こちらの記事</a> を参考にOSXに付属しているBSD系のアセンブラ <a href="http://www.nasm.us/">nasm</a> を使って VirtualBox で OS をブートして遊んでみます。</p>
<pre>$ nasm -v<br />NASM version 0.98.40 (Apple Computer, Inc. build 11) compiled on Aug 13 2013<br /></pre>
<p>フロッピー形式でプログラムを用意して hello, world と言わせてみましょう。アセンブリですよ！</p>
<p>つぎに VirtualBox にフロッピーとして読み込ませる img ファイルを生成します。</p>
<pre>$ nasm -o helloos.img helloos.asm && ruby -e 'print " " * (0x168000-0x200)' >> helloos.img</pre>
<p><a href="http://gyazo.com/6efc0f24ba2d883be8fe4650c2fd9865.png"><img border="0" src="http://gyazo.com/6efc0f24ba2d883be8fe4650c2fd9865.png" width="480" /></a></p>
<p>難なく動いてくれました。</p>
<p>仮想マシンを使って開発を進められるので大変手軽です。フロッピードライブも必要ないので助かります。</p>
<p>それではいよいよ <a href="http://shrimp.marokun.net/osakkie/wiki/tolsetOSX/">tolsetOSX</a> からツールセットを導入します。</p>
<p>まずは素直にできあいの tolsetOSX の z_tools を使うことにします。</p>
<p>その前に z_tools とともに同梱されている OSAkkie0.1.04 を走らせてみましょう。</p>
<p>OSAkkie0.1.04 ディレクトリで make all img するだけで osakkie.img がつくられるのでそれを先ほどの hello, world と同じ手順で VirtualBox 上で動かしてみます。</p>
<p><a href="http://gyazo.com/9097ee960b89d7e1765398e552ffe6be.png"><img border="0" src="http://gyazo.com/9097ee960b89d7e1765398e552ffe6be.png" width="480" /></a></p>
<p>うまく動きました。GUIがあってリッチですね。これがOS自作の目標のレベルです。</p>
<p>この見本に追いつくべく開発を進めたいのですが、問題が生じました。</p>
<blockquote lang="en"><p>だいたい技術書についてるCDは使わずに自分で手打ちして動かすので、自作OSの本をAmazonマーケットプレイスで買った時もどうせ使わないだろうと思ってCD付属してないやつ買ったんだけど今すごく後悔してる。</p>
<p>&mdash; ンフトウェアエソジニア (@ymkjp) <a href="https://twitter.com/ymkjp/statuses/412205504710979584">December 15, 2013</a></p></blockquote>
<p>この記事の底本となっている『<a href="http://www.amazon.co.jp/gp/product/4839919844/ref=as_li_ss_tl?ie=UTF8&amp;camp=247&amp;creative=7399&amp;creativeASIN=4839919844&amp;linkCode=as2&amp;tag=m0b55-22">30日でできる! OS自作入門</a>』は、本だけで完結しておらずソースコードがないと進めることができなかったのです。</p>
<p>本文でも Chapter 0 で下記のように書かれています。</p>
<div>
<blockquote>
<p style="font-size: small;">「本と付録のCD-ROM」ではなくて、「CD-ROMと付録のぶ厚い本」なのかもしれません（笑）</p>
<div><small><cite title="OS自作入門"><a href="http://www.amazon.co.jp/gp/product/4839919844/ref=as_li_ss_tl?ie=UTF8&amp;camp=247&amp;creative=7399&amp;creativeASIN=4839919844&amp;linkCode=as2&amp;tag=m0b55-22">30日でできる! OS自作入門</a></cite></small></div>
</blockquote>
</div>
<p>ということで、『OS自作入門』を参考にしようというひとはCD-ROMを手に入れるようにしましょう。</p>
<p>僕はすでにこの本を持っている人に借りてOS自作を進めていますが、この記事で紹介した方法で VirtualBox 上でうまく実行できました。</p>
<p>下準備編はここまでですが、せっかくなのでソースからのインストールにも挑戦して失敗した経緯も書いておきます。</p>
<div>
<blockquote>
<p style="font-size: small;">・コンパイルのしかた<br />tolsrc内でmake installを実行してください。最後までコンパイルができたら、OKディレクトリにツールがすべて入ります。</p>
<div><small><cite title="tolsetOSX"><a href="http://shrimp.marokun.net/osakkie/wiki/tolsetOSX/">tolsetOSX &#8211; OSAkkieWiki</a></cite></small></div>
</blockquote>
</div>
<p>しかしその make install が失敗する。エラーは下記の通り。</p>
<pre>$ make install<br />make all<br />make -C go_0023s<br />make -C gcc<br />make -r gocpp0 gocc1 gocc1plus<br />make -C ../libiberty<br />make -r libiberty.lib<br />make[6]: `libiberty.lib' is up to date.<br />make -C ../intl<br />make -r libintl.lib<br />make[6]: `libintl.lib' is up to date.<br />make -C ../go_lib<br />make -r go_lib.lib stdin.o<br />make[6]: `go_lib.lib' is up to date.<br />make[6]: `stdin.o' is up to date.<br />make -C ../drv_stdc<br />make -r cpp0main.obj cc1main.obj cc1pmain.obj drv_stdc.obj<br />gcc -c -Os -o cpp0main.obj cpp0main.c<br />In file included from cpp0main.c:8:<br />./cc1drv.c:26:5: error: second parameter of 'main' (argument array) must be of type 'char **'<br />int main(int argc, UCHAR **argv)<br />    ^<br />1 error generated.<br />make[6]: *** [cpp0main.obj] Error 1<br />make[5]: *** [all] Error 2<br />make[4]: *** [gocpp0] Error 2<br />make[3]: *** [all] Error 2<br />make[2]: *** [all] Error 2<br />make[1]: *** [all] Error 2<br />make: *** [install] Error 2</pre>
<p>OSX 付属の clang に原因があるようなので homebrew で最新のものを入れます。</p>
<pre>$ brew tap homebrew/versions && brew install gcc49</pre>
<p>make bootstrap に非常に時間がかかるのですが gcc49 の make bootstrap が終わったようなので新しいほうへ symlink を貼り直します。</p>
<pre>$ ln -s /usr/local/bin/gcc-4.9 /usr/loca<br />l/bin/gcc</pre>
<pre>$ ln -s /usr/local/bin/g++-4.9 /usr/loca<br />l/bin/g++</pre>
<p>バージョンを確認してみましょう。</p>
<pre>$ type -a gcc<br />gcc is /usr/local/bin/gcc<br />gcc is /usr/bin/gcc</pre>
<pre>$ /usr/local/bin/gcc -v<br />Using built-in specs.<br />COLLECT_GCC=/usr/local/bin/gcc<br />COLLECT_LTO_WRAPPER=/usr/local/Cellar/gcc49/4.9-20131201/libexec/gcc/x86_64-apple-darwin13.0.0/4.9.0/lto-wrapper<br />Target: x86_64-apple-darwin13.0.0<br />Configured with: ../configure --build=x86_64-apple-darwin13.0.0 --prefix=/usr/local/Cellar/gcc49/4.9-20131201 --enable-languages=c,c++,objc,obj-c++ --program-suffix=-4.9 --with-gmp=/usr/local/opt/gmp4 --with-mpfr=/usr/local/opt/mpfr2 --with-mpc=/usr/local/opt/libmpc08 --with-cloog=/usr/local/opt/cloog018 --with-isl=/usr/local/opt/isl011 --with-system-zlib --enable-version-specific-runtime-libs --enable-libstdcxx-time=yes --enable-stage1-checking --enable-checking=release --enable-lto --disable-werror --enable-plugin --disable-nls --disable-multilib<br />Thread model: posix<br />gcc version 4.9.0 20131201 (experimental) (GCC)</pre>
<pre>$ /usr/bin/gcc -v<br />Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/usr/include/c++/4.2.1<br />Apple LLVM version 5.0 (clang-500.2.79) (based on LLVM 3.3svn)<br />Target: x86_64-apple-darwin13.0.0<br />Thread model: posix</pre>
<p>準備が整ったところで make install に再度挑戦します。</p>
<p>しかし無念にも下記のエラー。</p>
<pre>$ make install<br />make all<br />make -C go_0023s<br />make -C gcc<br />make -r gocpp0 gocc1 gocc1plus<br />make -C ../libiberty<br />make -r libiberty.lib<br />make[6]: `libiberty.lib' is up to date.<br />make -C ../intl<br />make -r libintl.lib<br />make[6]: `libintl.lib' is up to date.<br />make -C ../go_lib<br />make -r go_lib.lib stdin.o<br />make[6]: `go_lib.lib' is up to date.<br />make[6]: `stdin.o' is up to date.<br />make -C ../drv_stdc<br />make -r cpp0main.obj cc1main.obj cc1pmain.obj drv_stdc.obj<br />make[6]: `cpp0main.obj' is up to date.<br />make[6]: `cc1main.obj' is up to date.<br />make[6]: `cc1pmain.obj' is up to date.<br />make[6]: `drv_stdc.obj' is up to date.<br />gcc -Wl,-s -o gocpp0  ../drv_stdc/cpp0main.obj cppmain.o intl.o <br />  libcpp.lib hashtable.o version.o ../intl/libintl.lib ../libiberty/libiberty.lib ../go_lib/go_lib.lib ../go_lib/stdin.o ../drv_stdc/drv_stdc.obj<br />ld: warning: option -s is obsolete and being ignored<br />Undefined symbols for architecture x86_64:<br />  "___builtin_stdarg_start", referenced from:<br />      _GO_fprintf in go_lib.lib(fprintf.o)<br />      _cpp_ice in libcpp.lib(cpperror.o)<br />      _cpp_fatal in libcpp.lib(cpperror.o)<br />      _cpp_error in libcpp.lib(cpperror.o)<br />      _cpp_error_with_line in libcpp.lib(cpperror.o)<br />      _cpp_warning in libcpp.lib(cpperror.o)<br />      _cpp_warning_with_line in libcpp.lib(cpperror.o)<br />      ...<br />ld: symbol(s) not found for architecture x86_64<br />collect2: error: ld returned 1 exit status<br />make[4]: *** [gocpp0] Error 1<br />make[3]: *** [all] Error 2<br />make[2]: *** [all] Error 2<br />make[1]: *** [all] Error 2<br />make: *** [install] Error 2<br /></pre>
<p>くやしいですがソースからインストールするのは諦めました。</p>
<p>
<h4>参考</h4>
<div>
<ul>
<li>
<div><small><cite title="g++ - OS X 10.9 gcc links to clang"><a href="http://stackoverflow.com/questions/19535422/os-x-10-9-gcc-links-to-clang/19535525#19535525">g++ &#8211; OS X 10.9 gcc links to clang &#8211; Stack Overflow</a></cite></small></div>
</li>
<li>
<div><small><cite title="MacOSXでOS自作入門してみる"><a href="http://d.hatena.ne.jp/Oresh/20110522/1306065533">MacOSXでOS自作入門してみる &#8211; Oreshの日記</a></cite></small></div>
</li>
<li>
<div><small><cite title="VirtualBoxやQemuで自作OSの第２章まで"><a href="http://ktaobo.blogspot.jp/2013/02/helloos.html?m=1">ブレ男のブログ: VirtualBoxやQemuで自作OSの第２章まで</a></cite></small></div>
</li>
</ul>
</div>
<div><adress><a href="http://twitter.com/ymkjp">@ymkjp</a></adress></div>
]]></content:encoded>
			<wfw:commentRss>https://xn--nyqr7s4vc72p.com/archives/97/feed</wfw:commentRss>
		<slash:comments>0</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">97</post-id>	</item>
		<item>
		<title>nokogiri 1.6 の gem install で libxslt あたりのエラーが出て困ったら GREP_OPTIONS を疑ってみましょう</title>
		<link>https://xn--nyqr7s4vc72p.com/archives/105</link>
		<comments>https://xn--nyqr7s4vc72p.com/archives/105#respond</comments>
		<pubDate>Mon, 09 Dec 2013 16:36:00 +0000</pubDate>
		<dc:creator><![CDATA[@i05]]></dc:creator>
				<category><![CDATA[dev]]></category>
		<category><![CDATA[env]]></category>
		<category><![CDATA[Ruby]]></category>

		<guid isPermaLink="false">http://tk2-249-34500.vs.sakura.ne.jp/2013/12/09/nokogiri-1-6-%e3%81%ae-gem-install-%e3%81%a7-libxslt-%e3%81%82%e3%81%9f%e3%82%8a%e3%81%ae%e3%82%a8%e3%83%a9%e3%83%bc%e3%81%8c%e5%87%ba%e3%81%a6%e5%9b%b0%e3%81%a3%e3%81%9f%e3%82%89-grep_options/</guid>
		<description><![CDATA[久しぶりに環境構築系のつらみをあじわいました。nokogiri を新しい ruby に gem install しようとしたところ、失敗しました。 解決策の要約としては GREP_OPTIONS で &#8211;color などを設定しているあたりをコメントアウトしたら上手くいきました。 configure 時の grep 関連の失敗は今回に限らず割とあるらしいですね。その発見があっただけでもよしとしたいところです。いやぁ、地雷は一度は踏み抜いてみるものですなぁ。 ※ちなみにここでいう grep コマンドは GNU 版の grep で OSX に標準で入っているBSD 版の grep とは少し異なります。この差異で失敗することもあるようです。 $ /usr/bin/grep --versiongrep (BSD grep) 2.5.1-FreeBSD $ /usr/local/bin/ggrep --version/usr/local/bin/ggrep (GNU grep) 2.14.56-1e3d $ brew tap homebrew/dupes &#038;& brew install grep --default-names 今回の grep は↑で入る grep です。 もう少し詳しく触れておくと、まず &#8230; <a href="https://xn--nyqr7s4vc72p.com/archives/105" class="more-link">Continue reading<span class="screen-reader-text"> "nokogiri 1.6 の gem install で libxslt あたりのエラーが出て困ったら GREP_OPTIONS を疑ってみましょう"</span></a>]]></description>
				<content:encoded><![CDATA[<p>久しぶりに環境構築系のつらみをあじわいました。<br />nokogiri を新しい ruby に gem install しようとしたところ、失敗しました。</p>
<p>解決策の要約としては GREP_OPTIONS で &#8211;color などを設定しているあたりをコメントアウトしたら上手くいきました。</p>
<p>configure 時の grep 関連の失敗は今回に限らず割とあるらしいですね。その発見があっただけでもよしとしたいところです。いやぁ、地雷は一度は踏み抜いてみるものですなぁ。</p>
<p>※ちなみにここでいう grep コマンドは GNU 版の grep で OSX に標準で入っているBSD 版の grep とは少し異なります。この差異で失敗することもあるようです。</p>
<pre>$ /usr/bin/grep --version<br />grep (BSD grep) 2.5.1-FreeBSD</pre>
<p>
<pre>$ /usr/local/bin/ggrep --version<br />/usr/local/bin/ggrep (GNU grep) 2.14.56-1e3d</pre>
<p>
<pre>$ brew tap homebrew/dupes && brew install grep --default-names</pre>
<p>今回の grep は↑で入る grep です。</p>
<p>もう少し詳しく触れておくと、まず gem install nokogiri が吐いていたエラーは下記の通りです。</p>
<pre>$ gem install nokogiri<br />Building native extensions.  This could take a while...<br />ERROR:  Error installing nokogiri:<br />        ERROR: Failed to build gem native extension.<br /><br />    /usr/local/var/rbenv/versions/2.0.0-p353/bin/ruby extconf.rb<br />Extracting libxml2-2.8.0.tar.gz into tmp/x86_64-apple-darwin13.0.0/ports/libxml2/2.8.0... OK<br />Running 'configure' for libxml2 2.8.0... OK<br />Running 'compile' for libxml2 2.8.0... OK<br />Running 'install' for libxml2 2.8.0... OK<br />Activating libxml2 2.8.0 (from /usr/local/var/rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/noko<br />giri-1.6.0/ports/x86_64-apple-darwin13.0.0/libxml2/2.8.0)...<br />Extracting libxslt-1.1.26.tar.gz into tmp/x86_64-apple-darwin13.0.0/ports/libxslt/1.1.26... OK<br />Running 'configure' for libxslt 1.1.26... ERROR, review 'tmp/x86_64-apple-darwin13.0.0/ports/libxslt/<br />1.1.26/configure.log' to see what happened.<br />*** extconf.rb failed ***<br />Could not create Makefile due to some reason, probably lack of necessary<br />libraries and/or headers.  Check the mkmf.log file for more details.  You may<br />need configuration options.<br /><br />Provided configuration options:<br />        --with-opt-dir<br />        --without-opt-dir<br />        --with-opt-include<br />        --without-opt-include=${opt-dir}/include<br />        --with-opt-lib<br />        --without-opt-lib=${opt-dir}/lib<br />        --with-make-prog<br />        --without-make-prog<br />        --srcdir=.<br />        --curdir<br />        --ruby=/usr/local/var/rbenv/versions/2.0.0-p353/bin/ruby<br />/usr/local/var/rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/mini_portile-0.5.2/lib/mini_portile<br />.rb:265:in `block in execute': Failed to complete configure task (RuntimeError)<br />        from /usr/local/var/rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/mini_portile-0.5.2/lib<br />/mini_portile.rb:257:in `chdir'<br />        from /usr/local/var/rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/mini_portile-0.5.2/lib<br />/mini_portile.rb:257:in `execute'<br />        from /usr/local/var/rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/mini_portile-0.5.2/lib<br />/mini_portile.rb:65:in `configure'<br />        from /usr/local/var/rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/mini_portile-0.5.2/lib<br />/mini_portile.rb:108:in `cook'<br />        from extconf.rb:101:in `block in <main>'<br />        from extconf.rb:131:in `call'<br />        from extconf.rb:131:in `block in <main>'<br />        from extconf.rb:122:in `tap'<br />        from extconf.rb:122:in `<main>'<br /><br /><br />Gem files will remain installed in /usr/local/var/rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/<br />nokogiri-1.6.0 for inspection.<br />Results logged to /usr/local/var/rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/nokogiri-1.6.0/ex<br />t/nokogiri/gem_make.out<br /></pre>
<p>そして気になる原因ですが、下記で引用してる nokogiri#issues では &#8211;color=auto ならだいじょうぶみたいに書かれていました。</p>
<p>ただ、僕の場合は auto でも失敗していました。</p>
<div>
<blockquote>
<p style="font-size: small;">
<pre>export GREP_OPTIONS="--color=auto"<br /></pre>
</p>
<div><small><cite title="sparklemotion"><a href="https://github.com/sparklemotion/nokogiri/issues/935">Install failure on OSX: No acceptable grep?? · Issue #935 · sparklemotion/nokogiri</a></cite></small></div>
</blockquote>
</div>
<p>なぜでしょうか。今回失敗していた時点の僕の GREP_OPTIONS は下記の通りです。</p>
<p>
<pre>$ echo $GREP_OPTIONS<br />--color=auto --exclude-dir=.libs --exclude-dir=.deps --exclude-dir=.git --exclude-dir=.svn --exclude=*.tmp --directories=recurse --binary-files=without-match<br /></pre>
<p>こうして見てみると *.tmp 無視しちゃってるのとか、かなり怪しいですね。<br />中途半端ですが原因究明はここまでです。</p>
<p>ということで、上記の issue も盛り上がっていたので blog にしてみました。</p>
<div><adress><a href="http://twitter.com/ymkjp">@ymkjp</a></adress></div>
]]></content:encoded>
			<wfw:commentRss>https://xn--nyqr7s4vc72p.com/archives/105/feed</wfw:commentRss>
		<slash:comments>0</slash:comments>
	<post-id xmlns="com-wordpress:feed-additions:1">105</post-id>	</item>
	</channel>
</rss>
